<!DOCTYPE html>
<!-- 
	Start of Experiment
	Author: Nikolay Panayotov
-->
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Language Learning Study</title>
	<!-- Styling -->
	<link href="study/css/normalize.css" rel="stylesheet">
	<link href="study/css/global_style.css" rel="stylesheet">
	<style>
		#briefingMain {
			min-width: 280px;
			width: 90%;
			position: relative;
			transform: none;
			margin: 0 auto;
			top: 0;
			left: 0;
		}
		
		#briefingMain p {
			padding-left: 5%;
			padding-right: 5%;
			text-align: justify;
			margin: 2em;
		}
		
		#briefingMain ul {
			padding-left: 10%;
			text-align: justify;
			margin: 2em;
		}
		
		#briefingMain ul li {
			padding-bottom: 1em;
		}
		
		em {
			font-weight: bold;
			color: red;
		}
	</style>
</head>
<body>
	<main id="briefingMain">
		<section id="briefing">
			<h1>Welcome to our 'Made-up Language Learning'-study!</h1>
			<p>We are trying to understand what factors make it easier or more difficult to learn to read and write. Because adults already know how to read and write in one or several languages, we made up a language of our own to study how people do it.
			</p>
			<ul>
			<li>First, you will hear the words of our language.
			</li>
			<li>Then you will see some invented letters and hear their sounds.
			</li><li>Then you will see words written using these letters and will learn to read them out loud. This is when we need to record you using your microphone.
			</li><li>Next, you will hear words and will practise writing them by clicking the letters on a virtual keyboard on the screen.
			</li><li>At the end, you will read and write the words again and we will see what you have learned.
			</ul>
			</p><p>Please make sure that you have a microphone and speakers/headphones, and that these are plugged in and working before taking part. This study is not compatible with iPhones and iPads, as well as the Safari browser and Internet Explorer, because of restrictions on audio recording. Please use the latest version of Google Chrome for best results.
			</p>
			<p><b>You are not allowed to write things down on paper as that is considered cheating! You shouldn't try it as it is very easy for us to tell when someone cheats.</b></p>
			<p>If you experience any technical difficulties during the study try refreshing or reloading the page through your browser.</p>
			<br>
			<div id="noMicMessage"><p><em>You either do not have a microphone plugged in or you have not granted us permission to use it. You cannot continue unless we can record you - please make sure you allow microphone use in your browser and refresh or reload the page.</em></p></div>
			<div id="noBrowserMessage" hidden><p><em>Your browser does not support audio recording and so you cannot participate through this browser.</em></p></div>
			<div id="noAudioMessage" hidden><p><em>Your browser does not support audio elements and so you cannot participate through this browser.</em></p></div>
			<button id="continueButton" onclick="window.location = 'study/';" disabled>Next</button>
		</section>
	</main>
	<script src="study/javascript/modernizr-custom.js"></script>
	<script>
		if (!Modernizr.getusermedia) {
			document.getElementById("noBrowserMessage").hidden = false;
			document.getElementById("continueButton").disabled = true;
		}
		
		if (!Modernizr.audio) {
			document.getElementById("noAudioMessage").hidden = false;
			document.getElementById("continueButton").disabled = true;
		}
		
		window.AudioContext = window.AudioContext || window.webkitAudioContext;
		navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia;
	
		window.onload = function() {
			document.getElementById("noMicMessage").hidden = false;
			document.getElementById("continueButton").disabled = true;
				
			// check if browser supports web audio
			try {
				var audio_context = new window.AudioContext;	
			} catch (e) {
				document.getElementById("noMicMessage").hidden = false;
				document.getElementById("continueButton").disabled = true;
			}

			// attempt to get user media
			navigator.getUserMedia({audio: true}, function() {
					document.getElementById("noMicMessage").hidden = true;
					document.getElementById("continueButton").disabled = false;
				}, function(e) {
				document.getElementById("noMicMessage").hidden = false;
				document.getElementById("continueButton").disabled = true;
			});
			
		}
	</script>
</body>
</html>